// ====== Policy Content for Modals ======
const policyContent = {
    'privacy-policy-link': {
      title: 'Privacy Policy',
      content: `
        <div class="legal-section mb-6">
          <p class="font-semibold">Last Updated: October 12, 2025</p>
        </div>
        <div class="legal-section mb-6">
          <h2 class="text-xl font-bold mb-4">1. Introduction</h2>
          <p>This Privacy Policy outlines the data collection and processing practices of <strong>Activate Partnerships LLC</strong> ("the Company," "we," "us," "our"). This document governs your access to and use of our website. By using this website, you consent to the terms of this Privacy Policy and our Terms of Service.</p>
        </div>
        <div class="legal-section mb-6">
          <h2 class="text-xl font-bold mb-4">2. Data Collected</h2>
          <p class="mb-4">We collect information that is transmitted to us when you interact with our website. This data includes:</p>
          <ul class="list-disc list-outside pl-6 space-y-3">
            <li><strong>User-Provided Information:</strong> Information voluntarily provided by you through our contact forms or other direct communications, which may include your name, email address, company affiliation, and any details contained within your message.</li>
            <li><strong>Automatically Collected Data:</strong> Technical information automatically logged by our third-party services such as Google Analytics. The use of Google Fonts may result in the transmission of your IP address to Google's servers. Our website is hosted on GitHub Pages, which may collect and log data such as your IP address, browser type, and operating system for security and operational purposes. <strong>We are not responsible for the data collection or privacy practices of these third-party providers, and their use is governed by their respective policies, which you can find here: <a href="https://docs.github.com/site-policy/privacy-policies/github-privacy-statement" target="_blank" class="text-primary-purple underline">GitHub Privacy Statement</a> and <a href="https://policies.google.com/privacy" target="_blank" class="text-primary-purple underline">Google Privacy Policy</a>.</strong></li>
          </ul>
        </div>
        <div class="legal-section mb-6">
          <h2 class="text-xl font-bold mb-4">3. Use of Data</h2>
          <p class="mb-4">The Company uses the collected data for internal business purposes, including but not limited to:</p>
          <ul class="list-disc list-outside pl-6 space-y-3">
            <li>Responding to and processing your inquiries.</li>
            <li>Maintaining and improving the functionality and performance of our website.</li>
            <li>Optimizing and improving our business operations and services.</li>
            <li>For internal marketing analysis to understand our user base and improve our outreach.</li>
            <li>Ensuring compliance with our legal obligations.</li>
          </ul>
        </div>
        <div class="legal-section mb-6">
          <h2 class="text-xl font-bold mb-4">4. Cookies and Tracking Technologies</h2>
          <p class="mb-4">Our website uses cookies and Google Analytics to enhance your experience and collect data for internal business purposes. Cookies are small data files stored on your device that help us understand how you use our site.</p>
          <p class="mb-4">We may use the following types of cookies:</p>
          <ul class="list-disc list-outside pl-6 space-y-3">
            <li><strong>Analytics Cookies:</strong> To collect information about traffic to our website and how users use our website. The data gathered is anonymous and helps us improve our site's performance and functionality.</li>
            <li><strong>Advertising and Retargeting Cookies:</strong> To serve relevant ads to you after you have left our website. This helps us market our services more effectively.</li>
            <li><strong>Functional Cookies:</strong> To enable certain website features, such as remembering your preferences.</li>
          </ul>
          <p class="mt-4">By using our website, you agree to the use of these technologies. If you do not wish to have cookies placed on your device, you can set your browser to refuse all or some cookies or to alert you when cookies are being sent. Note that if you disable or refuse cookies, some parts of the website may become inaccessible or not function properly. We are not responsible for your browser settings.</p>
        </div>
        <div class="legal-section mb-6">
          <h2 class="text-xl font-bold mb-4">5. Data Disclosure</h2>
          <p>The Company does not sell, lease, or rent your personal information. We may disclose your information to third-party service providers (e.g., website hosting, font services) or when required by law or legal process, or to protect the rights, property, or safety of our business or others.</p>
        </div>
        <div class="legal-section mb-6">
          <h2 class="text-xl font-bold mb-4">6. Your Rights</h2>
          <p>We respect your privacy rights and will comply with applicable laws, including but not limited to, the California Consumer Privacy Act (CCPA) and the General Data Protection Regulation (GDPR). If you would like to request to access, update, or delete your personal information, please contact us. We will take reasonable steps to fulfill such requests in accordance with applicable legal requirements.</p>
        </div>
        <div class="legal-section mb-6">
          <h2 class="text-xl font-bold mb-4">7. Data Retention</h2>
          <p>We retain your personal information for as long as necessary to fulfill the purpose for which it was collected, or as required by law.</p>
        </div>
        <div class="legal-section mb-6">
          <h2 class="text-xl font-bold mb-4">8. Changes to this Policy</h2>
          <p>The Company reserves the right to amend this Privacy Policy at any time and without prior notice. Any revisions will be posted on this page. Your continued use of the website following any changes to this Privacy Policy signifies your unqualified acceptance of the revised terms.</p>
        </div>
        <div class="legal-section mb-6">
          <h2 class="text-xl font-bold mb-4">9. Contact Information</h2>
          <p>For any questions regarding this Privacy Policy, please contact us at:</p>
          <p class="mt-2 text-primary-purple underline"><strong>Email:</strong> <a href="mailto:activatepartnerships@gmail.com">activatepartnerships@gmail.com</a></p>
        </div>
      `
    },
    'terms-of-service-link': {
      title: 'Terms of Service',
      content: `
        <div class="legal-section mb-6">
          <p class="font-semibold">Last Update: October 12, 2025</p>
        </div>
        <div class="legal-section mb-6">
          <h2 class="text-xl font-bold mb-4">1. Acceptance of Terms</h2>
          <p>This document constitutes a binding agreement. By accessing or using this website in any manner, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service ("Terms") and our <a href="#" id="in-modal-privacy-link" class="text-primary-purple underline">Privacy Policy</a>, including the collection of data through cookies and similar tracking technologies by third-party services such as Google Analytics. If you do not agree to both policies, you are prohibited from using this website.</p>
        </div>
        <div class="legal-section mb-6">
          <h2 class="text-xl font-bold mb-4">2. Use of Site</h2>
          <p>This website and its content are provided for informational purposes only. You agree to use the website in a manner that does not violate any applicable law or regulation, or cause any damage or disruption to the website or its users. <strong>Activate Partnerships LLC</strong> reserves the right to terminate or restrict your access to the website for your violation of these Terms or for any other valid business reason, with or without prior notice.</p>
        </div>
        <div class="legal-section mb-6">
          <h2 class="text-xl font-bold mb-4">3. Intellectual Property Rights</h2>
          <p>All content, trademarks, logos, and other intellectual property displayed on this website are the exclusive property of <strong>Activate Partnerships LLC</strong> or its licensors. You are granted a limited, non-exclusive, non-transferable license to access and view the content solely for your personal use. Any unauthorized use, reproduction, or distribution is strictly prohibited.</p>
        </div>
        <div class="legal-section mb-6">
          <h2 class="text-xl font-bold mb-4">4. Disclaimer of Warranties</h2>
          <p>THIS WEBSITE AND ALL CONTENT, MATERIALS, AND SERVICES AVAILABLE THROUGH THE WEBSITE ARE PROVIDED ON AN "AS IS" AND "AS AVAILABLE" BASIS. <strong>ACTIVATE PARTNERSHIPS LLC</strong> EXPRESSLY DISCLAIMS ALL WARRANTIES OF ANY KIND, WHETHER EXPRESS OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NON-INFRINGEMENT.</p>
        </div>
        <div class="legal-section mb-6">
          <h2 class="text-xl font-bold mb-4">5. Limitation of Liability</h2>
          <p>TO THE FULLEST EXTENT PERMITTED BY LAW, IN NO EVENT SHALL <strong>ACTIVATE PARTNERSHIPS LLC</strong>, ITS AFFILIATES, OFFICERS, DIRECTORS, EMPLOYEES, AGENTS, OR LICENSORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, INCLUDING BUT NOT LIMITED TO LOSS OF PROFITS, DATA, OR USE, ARISING OUT OF YOUR ACCESS, USE, OR INABILITY TO USE THE WEBSITE, EVEN IF <strong>ACTIVATE PARTNERSHIPS LLC</strong> HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.</p>
        </div>
        <div class="legal-section mb-6">
          <h2 class="text-xl font-bold mb-4">6. Indemnification</h2>
          <p>You agree to indemnify, defend, and hold harmless <strong>Activate Partnerships LLC</strong> and its affiliates, officers, directors, and employees from and against any and all claims, damages, losses, costs, or other expenses, including reasonable attorneys' fees, arising from your use of the website or your violation of these Terms.</p>
        </div>
        <div class="legal-section mb-6">
          <h2 class="text-xl font-bold mb-4">7. Dispute Resolution</h2>
          <p>In the event of any dispute or claim arising from these Terms, you agree to first work in good faith with <strong>Activate Partnerships LLC</strong> to resolve the matter through informal discussion or mediation. Any legal action or proceeding shall be brought exclusively in the courts of Massachusetts regardless of where you reside.</p>
        </div>
        <div class="legal-section mb-6">
          <h2 class="text-xl font-bold mb-4">8. Third-Party Services</h2>
          <p>This website uses third-party services, including GitHub Pages (for hosting), Google Fonts, and Google Analytics. Google Analytics collects information such as how visitors use the site, using cookies to track activity. By using this website, you consent to the use of cookies and the collection of data by these services. Please review the privacy policies of these third-party services for more information. Activate Partnerships LLC is not responsible for their functionality, security, or privacy practices.</p>
        </div>
        <div class="legal-section mb-6">
          <h2 class="text-xl font-bold mb-4">9. Changes to the Terms</h2>
          <p><strong>Activate Partnerships LLC</strong> reserves the right to amend these Terms at any time. Any revisions will be posted on this page with the updated "Last Updated" date. Your continued use of the website following any changes constitutes your acceptance of the revised Terms.</p>
        </div>
        <div class="legal-section mb-6">
          <h2 class="text-xl font-bold mb-4">10. Entire Agreement</h2>
          <p>These Terms constitute the entire agreement between you and <strong>Activate Partnerships LLC</strong> with respect to the use of the website and supersede all prior or contemporaneous understandings, agreements, or representations, whether written or oral.</p>
        </div>
        <div class="legal-section mb-6">
          <h2 class="text-xl font-bold mb-4">11. Contact Information</h2>
          <p>For any questions regarding these Terms, please contact us at:</p>
          <p class="mt-2 text-primary-purple underline"><strong>Email:</strong> <a href="mailto:activatepartnerships@gmail.com">activatepartnerships@gmail.com</a></p>
        </div>
      `
    },
    'blog-link': {
      title: 'Blog',
      content: `
        <p class="text-xl text-center font-semibold text-dark-text">Our blog is coming soon!</p>
        <p class="text-center text-dark-text-gray mt-2">We're busy crafting valuable content to help you master affiliate marketing. Check back soon for our first posts.</p>
      `
    }
  };
  
  // ====== Main Application Logic ======
  document.addEventListener('DOMContentLoaded', () => {
    const copyrightYear = document.getElementById('copyright-year');
    const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
    const mobileMenuClose = document.getElementById('mobile-menu-close');
    const mainNav = document.getElementById('main-nav');
    const modal = document.getElementById('policy-modal');
    const modalTitle = document.getElementById('modal-title');
    const modalContent = document.getElementById('modal-content');
    const modalCloseBtn = document.getElementById('modal-close-btn');
    let lastActiveElement = null;
  
    if (copyrightYear) {
      copyrightYear.textContent = new Date().getFullYear();
    }
  
    const initSmoothScroll = () => {
      if (mainNav) {
        mainNav.addEventListener('click', (e) => {
          if (e.target.matches('a[href^="#"]')) {
            e.preventDefault();
            const targetId = e.target.getAttribute('href');
            const targetElement = document.querySelector(targetId);
            if (targetElement) {
              targetElement.scrollIntoView({ behavior: 'smooth' });
              if (mainNav.classList.contains('is-open')) {
                mainNav.classList.remove('is-open');
                mainNav.style.display = 'none';
                if (mobileMenuToggle) {
                  mobileMenuToggle.setAttribute('aria-expanded', 'false');
                  mobileMenuToggle.setAttribute('aria-label', 'Toggle navigation menu (open)');
                  const svg = mobileMenuToggle.querySelector('svg');
                  if (svg) {
                    svg.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />';
                  }
                }
              }
            }
          }
        });
      }
    };
  
    const initMobileMenu = () => {
      if (mobileMenuToggle) {
        mobileMenuToggle.addEventListener('click', () => {
          const isOpen = mainNav.classList.toggle('is-open');
          if (mainNav) {
            mainNav.style.display = isOpen ? 'flex' : 'none';
          }
          mobileMenuToggle.setAttribute('aria-expanded', isOpen);
          mobileMenuToggle.setAttribute('aria-label', `Toggle navigation menu (${isOpen ? 'close' : 'open'})`);
          const svg = mobileMenuToggle.querySelector('svg');
          if (svg) {
            svg.innerHTML = isOpen
              ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />'
              : '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />';
          }
        });
      }
  
      if (mobileMenuClose) {
        mobileMenuClose.addEventListener('click', () => {
          if (mainNav) {
            mainNav.classList.remove('is-open');
            mainNav.style.display = 'none';
          }
          if (mobileMenuToggle) {
            mobileMenuToggle.setAttribute('aria-expanded', 'false');
            mobileMenuToggle.setAttribute('aria-label', 'Toggle navigation menu (open)');
            const svg = mobileMenuToggle.querySelector('svg');
            if (svg) {
              svg.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />';
            }
          }
        });
      }
    };
  
    const initModal = () => {
      const openModal = (title, content) => {
        lastActiveElement = document.activeElement;
        if (modalTitle && modalContent) {
          modalTitle.innerHTML = title;
          modalContent.innerHTML = content;
        }
        if (modal) {
          modal.classList.add('is-open');
        }
        if (modalCloseBtn) {
          modalCloseBtn.focus();
        }
      };
  
      const closeModal = () => {
        if (modal) {
          modal.classList.remove('is-open');
        }
        if (lastActiveElement && lastActiveElement.focus) {
          lastActiveElement.focus();
        }
      };
  
      // Modal triggers with null checks
      const privacyLink = document.getElementById('privacy-policy-link');
      const termsLink = document.getElementById('terms-of-service-link');
      const blogLink = document.getElementById('blog-link');
      const inFormPrivacyLink = document.getElementById('in-form-privacy-link');
      const inFormTermsLink = document.getElementById('in-form-terms-link');
  
      if (privacyLink) {
        privacyLink.addEventListener('click', (e) => {
          e.preventDefault();
          openModal(policyContent['privacy-policy-link'].title, policyContent['privacy-policy-link'].content);
        });
      }
  
      if (termsLink) {
        termsLink.addEventListener('click', (e) => {
          e.preventDefault();
          openModal(policyContent['terms-of-service-link'].title, policyContent['terms-of-service-link'].content);
        });
      }
  
      if (blogLink) {
        blogLink.addEventListener('click', (e) => {
          e.preventDefault();
          openModal(policyContent['blog-link'].title, policyContent['blog-link'].content);
        });
      }
  
      if (inFormPrivacyLink) {
        inFormPrivacyLink.addEventListener('click', (e) => {
          e.preventDefault();
          openModal(policyContent['privacy-policy-link'].title, policyContent['privacy-policy-link'].content);
        });
      }
  
      if (inFormTermsLink) {
        inFormTermsLink.addEventListener('click', (e) => {
          e.preventDefault();
          openModal(policyContent['terms-of-service-link'].title, policyContent['terms-of-service-link'].content);
        });
      }
  
      if (modalCloseBtn) {
        modalCloseBtn.addEventListener('click', closeModal);
      }
  
      if (modal) {
        modal.addEventListener('click', (e) => {
          if (e.target === modal) {
            closeModal();
          }
        });
  
        document.body.addEventListener('click', (e) => {
          if (e.target && e.target.id === 'in-modal-privacy-link') {
            e.preventDefault();
            openModal(policyContent['privacy-policy-link'].title, policyContent['privacy-policy-link'].content);
          }
        });
  
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && modal.classList.contains('is-open')) {
            closeModal();
          }
        });
  
        modal.addEventListener('keydown', (e) => {
          const focusableElements = modal.querySelectorAll('a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])');
          const firstElement = focusableElements[0];
          const lastElement = focusableElements[focusableElements.length - 1];
          if (e.key === 'Tab') {
            if (!e.shiftKey && document.activeElement === lastElement) {
              e.preventDefault();
              firstElement.focus();
            } else if (e.shiftKey && document.activeElement === firstElement) {
              e.preventDefault();
              lastElement.focus();
            }
          }
        });
      }
    };
  
    const initLazyLoading = () => {
      const sections = document.querySelectorAll('section');
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.opacity = '1';
            entry.target.style.transform = 'translateY(0)';
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.1 });
  
      sections.forEach(section => observer.observe(section));
    };
  
    // Initialize everything
    initSmoothScroll();
    initMobileMenu();
    initModal();
    initLazyLoading();
  });
